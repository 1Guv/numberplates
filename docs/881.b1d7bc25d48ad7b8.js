"use strict";(self.webpackChunknumberplates=self.webpackChunknumberplates||[]).push([[881],{881:(C,u,s)=>{s.r(u),s.d(u,{AdminModule:()=>Z});var i=s(3075),f=s(4466),d=s(9808),m=s(9516),g=s(567),v=s(96),U=s(4850),t=s(5e3),p=s(520),P=s(2340);let A=(()=>{class e{constructor(o){this.http=o,this.awsUrl="https://46pkjw13ag.execute-api.eu-west-2.amazonaws.com/prod/",this.headerDict={"x-api-key":P.N.awsConfig.xApiKey},this.requestOptions={headers:new p.WM(this.headerDict),method:"GET",mode:"no-cors"}}getPlates(){return this.http.get(`${this.awsUrl} + 'platelistings'`,this.requestOptions)}getPlate(o){return this.http.get(`${this.awsUrl} + 'plateListing' + 'id=' ${o}`,this.requestOptions)}createPlate(o){return this.http.post(`${this.awsUrl}plateListing`,o,this.requestOptions)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(p.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const b=[{path:"upload",component:(()=>{class e{constructor(o,n,a){this.http=o,this.plateListingsService=n,this.formBuilder=a,this.subscriptions=[],this.newPlates$=this.http.get("./assets/data/old_plates_to_new_object.json").pipe((0,v.d)(1))}ngOnInit(){this.buildForm()}buildForm(){this.form=this.formBuilder.group({start:[],end:[]})}uploadPlates(o,n){const a=[];this.subscriptions.push(this.newPlates$.pipe((0,U.U)(r=>{console.log("plates",r);const c=null==r?void 0:r.newPlateObjects.slice(o,n);console.log("platesToUpload",c),c.map(h=>{console.log("plate",h),a.push(this.plateListingsService.createPlate(h))}),(0,g.D)(a).pipe().subscribe(()=>console.log("done"))})).subscribe())}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.eN),t.Y36(A),t.Y36(i.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-plate-upload"]],decls:18,vars:5,consts:[[1,"container-fluid"],[1,"row","m-2","p-2"],[3,"formGroup"],["type","number","formControlName","start"],["type","number","formControlName","end"],["mat-raised-button","",1,"m-2",3,"disabled","click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"ADMIN > Plate Upload"),t.qZA(),t.TgZ(3,"div",1)(4,"form",2)(5,"label"),t._uU(6,"Start"),t.qZA(),t._UZ(7,"input",3)(8,"br")(9,"br"),t.TgZ(10,"label"),t._uU(11,"End"),t.qZA(),t._UZ(12,"input",4),t.qZA()(),t.TgZ(13,"button",5),t.NdJ("click",function(){return n.uploadPlates(n.form.get("start").value,n.form.get("end").value)}),t._uU(14," Upload "),t.qZA()(),t.TgZ(15,"pre"),t._uU(16),t.ALo(17,"json"),t.qZA()),2&o&&(t.xp6(4),t.Q6J("formGroup",n.form),t.xp6(9),t.Q6J("disabled",n.form.invalid),t.xp6(3),t.Oqu(t.lcZ(17,3,n.form.value)))},directives:[i._Y,i.JL,i.sg,i.wV,i.Fj,i.JJ,i.u],pipes:[d.Ts],styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(b)],m.Bz]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,y,f.m,i.UX]]}),e})()}}]);
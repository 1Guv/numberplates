<section id="create-listing" class="container-fluid">
    <div class="d-flex flex-column justify-content-center align-items-center py-5 text-center">


        <h1>{{ heading$ | async }}</h1>

        <app-large-plate-display-input [plate]="numberPlate$ | async"></app-large-plate-display-input>

        <br>
        
        <form [formGroup]="plateForm" class="mb-5">

            <div formGroupName="plateGroupName">

                <mat-form-field appearance="fill" class="field-width">
                    <mat-label>Please enter your plate</mat-label>
                    <input matInput 
                            type="text" 
                            formControlName="plate"
                            maxlength="8"
                            placeholder="{{ placeholderPlate$ | async }}">
        
                    <button *ngIf="plateForm.get('plateGroupName').get('plate').value"
                            mat-button
                            mat-icon-button 
                            aria-label="Clear"
                            matSuffix
                            (click)="plateForm.get('plateGroupName').get('plate').setValue('')">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>

                <br>
                <div class="d-flex flex-column justify-content-center align-items-left">
                    <mat-slide-toggle formControlName="free"
                                      (change)="onChangeFree($event)"
                                      [checked]="!plateForm.get('plateGroupName').get('premium').value">
                                      FREE!
                    </mat-slide-toggle>
                    <br>
                    <mat-slide-toggle formControlName="premium"
                                      (change)="onChangePremium($event)"
                                      [checked]="!plateForm.get('plateGroupName').get('free').value">
                                      PREMIUM!
                    </mat-slide-toggle>
                </div>
        
            </div>

        </form>

        <!-- <mat-horizontal-stepper #stepper class="mx-auto">
            <mat-step *ngFor="let stepper of stepperLabels; index as i">
                <ng-template matStepLabel>{{ stepper.label }}

                    <span *ngIf="i===0">
                        <ng-container *ngFor="let fc of formCards">
                            <app-form-card [title]="fc.title" [subTitle]="fc.subTitle">

                            </app-form-card>
                        </ng-container>
                    </span>

                </ng-template>
            </mat-step>            
        </mat-horizontal-stepper> -->

        <mat-horizontal-stepper #stepper class="mx-auto">
            
            <mat-step>
                <ng-template matStepLabel>Plate</ng-template>

                <app-form-card *ngFor="let fc of (formCards$ | async); index as i" [title]="fc.title" [subTitle]="fc.subTitle">
                    <div *ngIf="i===0">
                        <app-form-dynamic-inputs 
                            fG="{{ (meanings$ | async).formGroup }}"
                            fGN="{{ (meanings$ | async).formGroupName }}"
                            [fields]=" (meanings$ | async).inputFields "
                            >
                        </app-form-dynamic-inputs>
                    </div>

                    <div *ngIf="i===1">
                        <app-form-dynamic-selects 
                            fG="{{ ( ethnicities$ | async ).formGroup}}"
                            fGN="{{ ( ethnicities$ | async ).formGroupName}}"
                            fCN="{{ ( ethnicities$ | async ).formGroupName}}"
                            selectTitle="{{ ( ethnicities$ | async ).selectTitle}}"
                            [select]=" ( ethnicities$ | async ).inputFields"
                            >
                        </app-form-dynamic-selects>
                    </div>
                    
                </app-form-card>

                <!-- <app-form-card [title]="'Tell me what it means?'" [subTitle]="'Numberplate'">

                    <app-form-dynamic-inputs 
                        fG="one" 
                        fGN="meanings" 
                        [fields]="[{name: 'meaning one'}, {name: 'meaning two'}, {name: 'meaning three'}]">
                    </app-form-dynamic-inputs>

                </app-form-card>

                <app-form-card [title]="'What is the ethnicity of the plate if any?'" [subTitle]="'Numberplate'">

                    <app-form-dynamic-selects
                        fG="one" 
                        fGN="ethnicities"
                        fCN="ethnicity"
                        selectTitle="Ethnicity"
                        [select]="[{name: 'Sikh'}, {name: 'Mulsim'}, {name: 'Hindu'}, {name: 'English'}, {name: 'None'}]">
                    </app-form-dynamic-selects>

                </app-form-card>

                <app-form-card [title]="'Tell me how much it cost and your chosen selling price?'" [subTitle]="'Numberplate'">
                    <app-form-dynamic-inputs 
                        fG="one" 
                        fGN="price" 
                        [fields]="[{name: 'Display price'}, {name: 'Ideal selling Price'}, {name: 'Max selling price'}, {name: 'Min selling price'}, {name: 'Cost or Auction price'}, {name: 'Auction fees if applicable'}]">
                    </app-form-dynamic-inputs>

                </app-form-card>

                <app-form-card [title]="'Choose your plate year?'" [subTitle]="'Numberplate'">
                    <app-form-dynamic-selects
                        fG="one" 
                        fGN="registration years"
                        fCN="year"
                        selectTitle="Registration Years"
                        [select]="[{name: '2020'}, {name: '2019'}, {name: '2018'}, {name: '2017'}]">
                    </app-form-dynamic-selects>

                </app-form-card> -->
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Personal Details</ng-template>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Keep it FREE</ng-template>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Premuim</ng-template>
            </mat-step>

        </mat-horizontal-stepper>

        <pre>{{ plateForm.valid | json }}</pre>
        <pre>{{ plateForm.value | json }}</pre>
          
    </div>
</section>
